### 高级光照

* Blinn-Phong光照模型

  * 计算半程向量与镜面法向量的点积
  * 避免了Phong的反射方向与视线方向的角度过大点积结果为0


---
### 伽马校正

* 在线性空间中PBR，将最终结果校正到sRGB
* 计算混合、缩放、反走样时都需要伽马校正
* sRGB材质图片需要转换到线性空间中


* 真实光线衰减 = 1 / 距离<sup>2</sup>
  * 模拟：\[计算]-> 1/d ->\[sRGB<sup>2.2</sup>]-> 1/d<sup>2.2</sup>
  * 伽马校正：\[物理计算]-> 1/d<sup>2</sup> ->\[Gammma<sup>1/2.2</sup>]-> 1/d ->\[sRGB<sup>2.2</sup>]-> 1/d<sup>2.2</sup>


---
### 阴影映射


* 光源空间坐标转换后将深度格式的纹理贴图绑定到帧缓冲，渲染得到阴影贴图。
* 将光空间中的片段位置映射到阴影贴图中，比较记录深度和实际深度。


---
### 点阴影

* 使用`GL_TEXTURE_CUBE_MAP`深度贴图

  * 在几何着色器中`gl_Layer`激活的每个面上绘制对应空间变换后的点
  * 在片段着色器中写入规范化的`gl_FragDepth`
